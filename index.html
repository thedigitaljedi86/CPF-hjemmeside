<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>Welcome to
		CBS Personal Finance</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="stylesheet" href="assets/css/main.css" />

	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
	<script defer src="https://webanalytics.digitaljedi.dk/script.js" data-website-id="7fa0927d-5461-4f3d-80f8-365d4a948c18"></script>
</head>

<body class="is-preload page-home">

	<!-- Page Wrapper -->
	<div id="page-wrapper">

		<!-- Header -->
		<header id="header" class="alt">
			<h1>
				<a href="index.html">
					<img src="images/white_logo.png" alt="" />
					CBS Personal Finance
				</a>
			</h1>
			<nav>
				<a href="#menu">Menu</a>
			</nav>
		</header>

		<!-- Menu -->
		<nav id="menu">
			<div class="inner">
				<h2>Menu</h2>
				<ul class="links">
					<li class="has-submenu">
						<a href="#" class="submenu-toggle" aria-expanded="false">About Us</a>
						<ul class="submenu">
							<li><a href="what.html">What is CBS Personal Finance?</a></li>
							<li><a href="team.html">The Team</a></li>
						</ul>
					</li>
					<li><a href="partners.html">Our Partners</a></li>
					<li><a href="events.html">Events</a></li>
					<li><a href="join.html">Join The Team</a></li>
				</ul>
				<a href="#" class="close">Close</a>
			</div>
		</nav>

		<!-- Banner -->
		<section id="banner">
			<div class="video-wrapper">
				<video autoplay playsinline muted loop id="bg_video" preload="auto">
					<source id="header-video" src="" type="" poster="">
				</video>
			</div>
			<div class="inner">
				<div class="logo"><img id="header-logo" src="" alt="" /></div>
				<p id="header-header"></p>
				<i id="header-text"></i>
			</div>
		</section>

		<!-- Wrapper -->
		<section id="wrapper">

			<!-- Event -->
			<section id="one" class="wrapper spotlight style1">
				<div class="inner">
					<a id="event-image-wrapper" href="#" class="image"><img id="event-image" src="" alt="" /></a>
					<div class="content">
						<h2 class="major" id="event-headline"></h2>
						<p id="event-text"></p>
						<a id="event-button" href="" class="special"></a>
					</div>
				</div>
			</section>

			<!-- Newsletter -->
			<section id="two" class="wrapper alt spotlight style2">
				<div class="inner">
					<a id="newsletter-image-wrapper" href="#" class="image"><img id="newsletter-image" src="" alt="" /></a>
					<div class="content">
						<h2 class="major" id="newsletter-headline"></h2>
						<p id="newsletter-text"></p>
						<a id="newsletter-button" href="" class="special"></a>
					</div>
				</div>
			</section>

		</section>

		<!-- Footer -->
		<section id="footer">
			<iframe src="./shared/footer.html" width="100%" frameborder="0" scrolling="no" id="footerFrame"></iframe>
		</section>
        <script>
            // Dynamisk højde: Forudsætter at /footer.html sender sin højde via postMessage
            window.addEventListener('message', function (event) {
                if (event.data && event.data.footerHeight) {
                    document.getElementById('footerFrame').style.height = event.data.footerHeight + 'px';
                }
            }, false);
        </script>
	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var toggles = document.querySelectorAll('#menu .submenu-toggle');

			toggles.forEach(function (toggle) {
				toggle.addEventListener('click', function (e) {
					e.preventDefault();

					var li = toggle.closest('.has-submenu');
					var isOpen = li.classList.toggle('open');

					// Tilgængelighed
					toggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
				});
			});
		});
	</script>

	<script type="module">
		import { getEntries, asHttpsUrl } from "./assets/js/contentfull.js";

		const frontpage = await getEntries('frontpage');

		// Eksempel: hent en bestemt entry på ID
		insertHeaderContent(frontpage);
		insertEventContent(frontpage);
		insertNewsletterContent(frontpage);
		
		function insertHeaderContent(frontpage) {
			const header = frontpage.get("5suteFBa3Q8g5nX0sLegZS")?.fields;
			
			document.getElementById("header-header").innerHTML = header?.header;
			document.getElementById("header-logo").setAttribute("src", asHttpsUrl(header?.logo.fields.file.url));
			document.getElementById("header-text").innerHTML = header?.text;
			
			// Bg video
			document.getElementById("header-video").setAttribute("src", asHttpsUrl(header?.video.fields.file.url));
			document.getElementById("header-video").setAttribute("type", header?.video.fields.file.contentType);
			document.getElementById("header-video").setAttribute("poster", asHttpsUrl(header?.poster.fields.file.url));
			const videoEl = document.getElementById("bg_video").load();
		}

		function insertEventContent(frontpage) {
			const event = frontpage.get("FUqDmW1syDHTCtOqSsgA6")?.fields;

			// Element references
			document.getElementById("event-headline").innerHTML = event?.headline;
			document.getElementById("event-text").innerHTML = event?.text?.content[0]?.content[0]?.value;
			document.getElementById("event-button").setAttribute("href", event?.link);
			document.getElementById("event-button").innerHTML = event?.button;

			if(event?.image?.fields?.file?.url) {
				document.getElementById("event-image").setAttribute("src", asHttpsUrl(event?.image.fields.file.url));
			}
			else{
				document.getElementById("event-image-wrapper").style.display = "none";
			}
		}

		function insertNewsletterContent(frontpage) {
			const newsletter = frontpage.get("3IgeV0WfEJGFtcRJSuNteI")?.fields;

			document.getElementById("newsletter-headline").innerHTML = newsletter?.headline;
			document.getElementById("newsletter-text").innerHTML = newsletter?.text?.content[0]?.content[0]?.value;
			document.getElementById("newsletter-button").setAttribute("href", newsletter?.link);
			document.getElementById("newsletter-button").innerHTML = newsletter?.button;

			if(newsletter?.image?.fields?.file?.url) {
				document.getElementById("newsletter-image").setAttribute("src", asHttpsUrl(newsletter?.image.fields.file.url));
			}
			else{
				document.getElementById("newsletter-image-wrapper").style.display = "none";
			}
		}

	</script>
</body>

</html>