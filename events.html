<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>CBS Personal Finance | Our Partners</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
	<script defer src="https://webanalytics.digitaljedi.dk/script.js"
		data-website-id="7fa0927d-5461-4f3d-80f8-365d4a948c18"></script>
</head>

<body class="is-preload">

	<!-- Page Wrapper -->
	<div id="page-wrapper">

		<div id="header-container"></div>
		<script src="assets/js/header-loader.js"></script>

		<!-- Wrapper -->
		<section id="wrapper">
			<header class="events-header" id="page-header">
				<div class="inner">
					<h2 id="header-headline"></h2>
					<p id="header-text"></p>
				</div>
			</header>

			<!-- Event -->
			<section id="upcoming-event" class="wrapper spotlight style1" style="display: none !important;">
				<div class="inner">
					<a href="#" class="image"><img id="upcoming-event-image" src="" alt="" /></a>
					<div class="content">
						<h2 class="major" id="upcoming-event-headline"></h2>
						<div class="event-details">
							<script src="https://www.universe.com/embed2.js" data-state=""></script>
							<a id="upcoming-event-button" href="" class="special"></a>
							<p class="event">
								<i class="icon solid fa-calendar"></i>
								<span id="upcoming-event-date"></span>
							</p>
							<p class="event">
								<i class="icon solid fa-map-marker-alt"></i>
								<span id="upcoming-event-location"></span>
							</p>
							<p class="event">
								<i class="icon solid fa-credit-card"></i>
								<span id="upcoming-event-price"></span>
							</p>
						</div>
					</div>
				</div>
			</section>

			<!-- No events placeholder -->
			<section id="no-upcoming-event" class="wrapper spotlight style1" style="display: none !important;">
				<div class="inner">
					<a href="#" class="image"><img id="no-upcoming-event-image" src="" alt="" /></a>
					<div class="content">
						<h2 class="major" id="no-upcoming-event-headline"></h2>
						<p id="no-upcoming-event-text"></p>
						<a id="no-upcoming-event-button" href="" class="special"></a>
					</div>
				</div>
			</section>

			<section id="one" class="wrapper alt style3">
				<div class="inner">
					<h2 class="major" id="previous-events-headline"></h2>
					<section id="previous-events-features" class="features"></section>
				</div>
			</section>
		</section>

		<!-- Footer -->
		<div id="footer-container"></div>
		<script type="module" src="assets/js/footer-loader.js"></script>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<script type="module">
		import { getEntries, asHttpsUrl, createFeature } from "./assets/js/contentfull.js";
		import { hideLoader } from "./assets/js/loader.js";

		const events = await getEntries('events');
		// Eksempel: hent en bestemt entry pÃ¥ ID
		insertHeaderContent(events);
		insertUpcomingEventContent(events);
		insertPreviousEventsContent(events);
		hideLoader();

		function insertHeaderContent(events) {
			const header = events.get("DT3SMJHW2N5Bzb7vj8BlX")?.fields;

			document.getElementById("header-headline").innerHTML = header?.headline;
			document.getElementById("header-text").innerHTML = header?.text;

			const url = asHttpsUrl(header?.image?.fields?.file?.url);
			document.getElementById("page-header").style.backgroundImage =
				`linear-gradient(to top, rgba(44, 55, 95, 0.8), rgba(44, 55, 95, 0.8)), url("${url}")`;
		}

		function insertUpcomingEventContent(events) {
			const upcomingEvent = events.get("WJCeJzB76Y1lhO0w4FH6D")?.fields;

			if (upcomingEvent?.display) {
				document.getElementById("upcoming-event").style.display = "block";
				document.getElementById("upcoming-event-headline").innerHTML = upcomingEvent?.headline;
				document.getElementById("upcoming-event-image").setAttribute("src", asHttpsUrl(upcomingEvent?.image.fields.file.url));
				document.getElementById("upcoming-event-button").setAttribute("href", upcomingEvent?.link + "?buttonColor=#2c375f&buttonText=Buy tickets");
				document.getElementById("upcoming-event-button").innerHTML = upcomingEvent?.button;
				document.getElementById("upcoming-event-date").innerHTML = formatDate(upcomingEvent?.date);
				document.getElementById("upcoming-event-location").innerHTML = upcomingEvent?.location;
				document.getElementById("upcoming-event-price").innerHTML = upcomingEvent?.price;
			} else {
				document.getElementById("upcoming-event").style.display = "none";
				insertNoUpcomingEventContent(events);
			}
		}

		function insertNoUpcomingEventContent(events) {
			const upcomingEvent = events.get("3mF3hQ6MmW3ddCeqSJYWKe")?.fields;

			document.getElementById("no-upcoming-event").style.display = "block";

			document.getElementById("no-upcoming-event-headline").innerHTML = upcomingEvent?.headline;
			document.getElementById("no-upcoming-event-text").innerHTML = upcomingEvent?.text?.content[0]?.content[0]?.value;
			document.getElementById("no-upcoming-event-button").innerHTML = upcomingEvent?.button;
			document.getElementById("no-upcoming-event-button").setAttribute("href", upcomingEvent?.link);
			document.getElementById("no-upcoming-event-image").setAttribute("src", asHttpsUrl(upcomingEvent?.image.fields.file.url));
		}

		function insertPreviousEventsContent(events) {
			const previousEvents = events.get("1czSi6xmB519wOVp3jR9TR")?.fields;
			const container = document.getElementById("previous-events-features");

			document.getElementById("previous-events-headline").innerHTML = previousEvents?.name;


			previousEvents?.features.forEach(event => {
				container.appendChild(createFeature(event));
			});
		}

		function formatDate(dateStr) {
			const date = new Date(dateStr);
			const tz = 'Europe/Copenhagen';
			const day = parseInt(date.toLocaleString('en-GB', { day: 'numeric', timeZone: tz }));
			const month = date.toLocaleString('en-GB', { month: 'long', timeZone: tz });
			const year = date.toLocaleString('en-GB', { year: 'numeric', timeZone: tz });
			const suffix = day === 1 || day === 21 || day === 31 ? 'st'
				: day === 2 || day === 22 ? 'nd'
					: day === 3 || day === 23 ? 'rd'
						: 'th';
			return `${day}${suffix} of ${month} ${year}`;
		}
	</script>

</body>

</html>